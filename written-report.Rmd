---
title: "Racial Disparities in Traffic Stops/Citations"
author: "Keohane sQUAD: Chris Liang, Andrew Qin, Bob Qian, and Katie Nash"
date: "Update date"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      warning = FALSE, 
                      message = FALSE)
```

```{r read-data}
library(tidyverse)
library(infer)
police <- read.csv("data/nc_durham_2020_04_01.csv")
```

```{r filter-data}
police <- police %>% 
  filter(subject_race != "unknown" & subject_race != "NA") %>% 
  filter(subject_age != "NA")
```


## Introduction and Data

Our data is a census of individual police stops in Durham created by the Stanford Open Policing project. The Stanford Open Policing Project "[collects] and [standardizes] data on vehicle and pedestrian stops from law enforcement departments across the country"(https://openpolicing.stanford.edu/). We would like to see if that same kind of racial bias is evident in police stops in Durham. In doing so, we also wish to examine if other demographic characteristics (such as sex or age) influence traffic stops. Our general research question is the following: what is the relationship between a subject's demographic attributes (sex, race, or age) and the likelihood of being stopped by police in traffic in Durham? 

We hypothesize that race and the likelihood of being stopped by police in traffic in Durham are related, with black people representing disproportionately more of the people being stopped relative to their proportion within the population. We hypothesize that younger people (roughly 18-30) have a disproportionately higher chance of being stopped in traffic (not necessarily due to bias but other lurking variables, such as inexperienced driving). We also hypothesize that sex has no significant relationship with being stopped in traffic. To find the true population proportions of people by race, sex, and age in Durham, we will utilize the 2010 Durham census data (http://censusviewer.com/city/NC/Durham). 

Additionally, we will examine whether race, sex, or age are related to the outcome of the traffic stop (whether a citation will be issued). We hypothesize that race and the likelihood of receiving a citation are related, with black people more likely to receive a citation upon being stopped. We additionally hypothesize that younger people have a higher chance of receiving a citation upon being stopped and that sex has no significant relationship with being stopped in traffic.

It has `r ncol(police)` variables and `r nrow(police)` observations, and each observation in the data set is an individual police stop recorded in Durham during 2001 to 2015. A categorical variable in the data set is `subject_race`, which describes the race of the subject involved in the traffic stop.A discrete numerical variable in the data set is `subject_age`, which describes the age of the subject at the time of the traffic stop. A continuous numerical variable in the data set is `time`, which describes the hour, minute, and second that the stop was recorded. Other variables in the data set include `outcome`, which is what resulted from the stop (a warning or a citation, for example); `reason_for_stop`, which describes what the violation leading to the stop was; and `search_conducted`, whether a search of the subject was conducted during the stop.


## Methodology

race~citation
age~citation
sex~citation

segmented bar graph w/ probability of citation based on race. 



```{r bargraph}
ggplot(police, aes(x = subject_race, fill = citation_issued)) + 
  geom_bar(position = "fill") + 
  labs(title = "Likelihood of Receiving Citation Based on Race", 
       y = "Proportion", 
       x = "Subject Race", 
       fill = "Citation Issued")
```

```{r bargraph2}
ggplot(police, aes(x = subject_sex, fill = citation_issued)) + 
  geom_bar(position = "fill") + 
  labs(title = "Likelihood of Receiving Citation Based on Sex", 
       y = "Proportion", 
       x = "Subject Sex", 
       fill = "Citation Issued")
```

```{r age-cat}
police <- police %>% 
  mutate(age_cat = case_when(
    subject_age <= 25 ~ "10-25", 
    subject_age > 25 & subject_age <= 40 ~ "25-40", 
    subject_age > 40 & subject_age <= 64 ~ "40-64", 
    subject_age > 64 ~ "65 or older"
  ))

```

```{r bargraph3}
ggplot(police, aes(x = age_cat, fill = citation_issued)) + 
  geom_bar(position = "fill") + 
  labs(title = "Likelihood of Receiving Citation Based on Age", 
       y = "Proportion", 
       x = "Subject Age Category", 
       fill = "Citation Issued")
```


## Results

```{r chisq}
police %>% 
  chisq_test(formula = citation_issued ~ subject_race)
```

<<<<<<< HEAD
```{r chisq2}
police %>% 
  chisq_test(formula = citation_issued ~ age_cat)
```

```{r chisq3}
police %>% 
  chisq_test(formula = citation_issued ~ subject_sex)
```

=======
Though black people are disproportionately more likely to be stopped for a traffic violation, they were not the most likely to receive a citation upon being stopped--Hispanics were the most likely to receive a citation after being stopped. 
>>>>>>> 53ecaab072524d69fb1ef501f86cbd742b40efa0

## Discussion



